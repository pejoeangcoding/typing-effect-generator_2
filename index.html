<!DOCTYPE html><html lang="id"><head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Code Typer by Pejoeang Coding</title>
  <style>
    :root{
      --bg:#0e0f12;
      --panel:#111318;
      --muted:#8b93a1;
      --text:#e8ebf1;
      --accent:#10a37f;
      --accent-2:#2fb67d;
      --danger:#ef4343;
      --ring: #2a2f3a;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;}
    body{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      background:linear-gradient(180deg, #0c0d10 0%, #0e0f12 60%, #0b0c0f 100%);
      color:var(--text);
    }
    .wrap{max-width:1000px;margin:0 auto;padding:24px}
    header{display:flex;gap:12px;align-items:center;margin:8px 0 20px}
    .dot{width:10px;height:10px;border-radius:50%;background:var(--accent);box-shadow:0 0 12px var(--accent)}
    h1{font-size:18px;margin:0 0 2px 0;font-weight:700;letter-spacing:.3px}
    .subtitle{font-size:12px;color:var(--muted)}
    .card{background:var(--panel);border:1px solid var(--ring);border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.35);overflow:hidden}
    .toolbar{display:flex;flex-wrap:wrap;gap:10px;align-items:center;padding:12px 14px;border-bottom:1px solid var(--ring)}
    .grow{flex:1}
    .btn{appearance:none;border:1px solid var(--ring);background:#151821;color:var(--text);padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer;transition:transform .08s ease, background .2s ease, border-color .2s ease}
    .btn:hover{transform:translateY(-1px);border-color:#394152}
    .btn.primary{background:var(--accent);border-color:transparent;color:#08140f}
    .btn.primary:hover{background:var(--accent-2)}
    .btn.danger{background:#1b1416;color:#ffd7d7;border-color:#5b2828}
    .btn.danger:hover{background:#241416}
    .btn:disabled{opacity:.55;cursor:not-allowed;transform:none}
    .field{display:flex;align-items:center;gap:10px;color:var(--muted);font-size:12px}
    .field input[type="range"]{width:200px}
    textarea#code{width:100%;min-height:260px;border:0;resize:vertical;outline:none;padding:16px;font-size:14px;line-height:1.5;background:#0f1117;color:var(--text)}
    textarea#code::placeholder{color:#5c6678}
    .footer-hint{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-top:1px solid var(--ring);font-size:12px;color:var(--muted)}
    .layer{position:fixed;inset:0;display:none;z-index:40;background:#0e0f12;}
    .layer.show{display:flex;flex-direction:column;}
    .chat {
  flex:1;
  height:100%;
  width:100%;
  overflow-y:auto;
  padding:24px;
  background:transparent;
}
.chat-row {
  width:100%;
  display:block; /* biar teks tumbuh ke bawah */
}
    .avatar{display:none}
    .bubble{flex:1;max-width:100%;height:100%;background:transparent;border:none;box-shadow:none;padding:20px;overflow-y:auto}
    pre.code{margin:0;white-space:pre-wrap;word-break:break-word;font-size:16px;line-height:1.5;color:#e8ebf1;}
    .cursor{display:inline-block;width:7px;height:1.2em;vertical-align:-2px;background:var(--accent);animation:blink 1s infinite}
    @keyframes blink{0%,49%{opacity:1}50%,100%{opacity:0}}
    .topbar{position:fixed;top:12px;right:12px;display:flex;gap:8px;z-index:41}
    .countdown{position:fixed;inset:0;display:none;z-index:50;place-items:center;background:rgba(0,0,0,.8)}
    .countdown.show{display:grid}
    .digit{font-size:14vw;font-weight:900;letter-spacing:.06em;color:#e7fff7;text-shadow:0 10px 50px rgba(16,163,127,.55);animation:pop .8s ease forwards}
    @keyframes pop{0%{transform:scale(.7);opacity:.2}60%{transform:scale(1.1);opacity:1}100%{transform:scale(1);opacity:1}}
    .result{position:fixed;inset:0;display:none;z-index:60;background:#0b0c0f}
    .result.show{display:block}
    .result .bar{display:flex;align-items:center;gap:10px;padding:10px 14px;border-bottom:1px solid var(--ring);background:#0e1116}
    .result .bar .tag{font-size:12px;color:#a8b0be}
    .result .bar .pill{border:1px solid #2c3442;border-radius:999px;padding:6px 10px;font-size:12px;color:#cfe9df}
    .result iframe{border:0;width:100%;height:calc(100% - 48px);background:white}
    .tiny{font-size:11px;color:#6a7280}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <span class="dot"></span>
      <div>
        <h1>Pejoeang Coding Style Code Typer</h1>
        <div class="subtitle">Ketikkan HTML, CSS, JavaScript anda, Hasil tampil setelah hitung mundur 3-2-1.</div>
      </div>
    </header>
    <section class="card">
      <div class="toolbar">
        <div class="field">Kecepatan: <input type="range" id="speed" min="10" max="300" value="60"><span id="speedText">60 ms/kar</span></div>
        <div class="field">Ukuran font: <input type="range" id="fsize" min="12" max="22" value="15"><span id="fText">15 px</span></div>
        <div class="grow"></div>
        <button id="start" class="btn primary">Mulai Ketik</button>
        <button id="stop" class="btn danger" disabled>Hentikan</button>
      </div>
      <textarea id="code" spellcheck="false" placeholder="Tempel HTML/CSS/JS Anda di sini.\nContoh: satu file HTML lengkap."></textarea>
      <div class="footer-hint">
        <span class="tiny">Catatan: tidak ada sample code & tidak ada preview saat mengetik.</span>
        <span class="tiny">Hasil akan ditampilkan setelah pengetikan selesai + countdown 3-2-1.</span>
      </div>
    </section>
  </div>
  <div id="layer" class="layer" aria-hidden="true">
    <div class="topbar">
      <button id="closeLayer" class="btn">Tutup</button>
    </div>
    <div class="chat" id="chat">
      <div class="chat-row">
        <div class="bubble">
          <pre id="typed" class="code"></pre>
        </div>
      </div>
    </div>
  </div>
  <div id="countdown" class="countdown" aria-hidden="true">
    <div class="digit" id="digit">3</div>
  </div>
  <div id="result" class="result" aria-hidden="true">
    <div class="bar">
      <span class="tag">Hasil Render</span>
      <span class="pill" id="meta"></span>
      <div class="grow"></div>
      <button id="closeResult" class="btn">Kembali</button>
    </div>
    <iframe id="out"></iframe>
  </div>
  <audio id="keySound" src="https://actions.google.com/sounds/v1/office/typewriter.ogg" preload="auto"></audio>
  <script>
    const codeEl = document.getElementById('code');
    const startBtn = document.getElementById('start');
    const stopBtn  = document.getElementById('stop');
    const speedEl  = document.getElementById('speed');
    const speedText= document.getElementById('speedText');
    const sizeEl   = document.getElementById('fsize');
    const fText    = document.getElementById('fText');
    const layer    = document.getElementById('layer');
    const typed    = document.getElementById('typed');
    const closeLayer= document.getElementById('closeLayer');
    const countdown= document.getElementById('countdown');
    const digitEl  = document.getElementById('digit');
    const result   = document.getElementById('result');
    const outFrame = document.getElementById('out');
    const closeResult = document.getElementById('closeResult');
    const metaTag  = document.getElementById('meta');
    const keySound = document.getElementById('keySound');
    let timer = null; let idx = 0; let running = false; let content = '';
    speedEl.addEventListener('input', () => { speedText.textContent = `${speedEl.value} ms/kar`; });
    sizeEl.addEventListener('input', () => { fText.textContent = `${sizeEl.value} px`; typed.style.fontSize = sizeEl.value + 'px'; });
    startBtn.addEventListener('click', () => {
      const code = codeEl.value;
      if (!code.trim()) { alert('Tempelkan kode terlebih dahulu.'); return; }
      running = true; idx = 0; content = code; typed.textContent='';
      showLayer(true); toggleBtns(true); tick();
    });
    stopBtn.addEventListener('click', hardStop);
    closeLayer.addEventListener('click', hardStop);
    closeResult.addEventListener('click', () => { showResult(false); });
    function toggleBtns(isRunning){ startBtn.disabled = isRunning; stopBtn.disabled  = !isRunning; }
    function showLayer(on){ layer.classList.toggle('show', on); layer.setAttribute('aria-hidden', on? 'false':'true'); }
    function showCountdown(on){ countdown.classList.toggle('show', on); countdown.setAttribute('aria-hidden', on? 'false':'true'); }
    function showResult(on){ result.classList.toggle('show', on); result.setAttribute('aria-hidden', on? 'false':'true'); if(!on){ outFrame.src='about:blank'; metaTag.textContent=''; } }
    function tick(){
      if (!running) return;
      if (idx >= content.length) { finish(); return; }
      typed.textContent += content.charAt(idx);
      idx++;
      if (!typed.querySelector('.cursor')){
        const c = document.createElement('span');
        c.className = 'cursor';
        typed.appendChild(c);
      }
      try { keySound.currentTime = 0; keySound.play(); } catch(e){}
      const chat = document.getElementById('chat');
      const lineHeight = parseInt(window.getComputedStyle(typed).lineHeight) || 18;
      chat.scrollTop = typed.scrollHeight - chat.clientHeight + (lineHeight * 8);
      let base = Number(speedEl.value);
      let jitter = Math.floor(Math.random() * base * 0.6);
      let nextDelay = base + (Math.random() < 0.5 ? -jitter : jitter);
      timer = setTimeout(tick, Math.max(10, nextDelay));
    }
    function finish(){
      running = false; toggleBtns(false);
      const cur = typed.querySelector('.cursor'); if (cur) cur.remove();
      setTimeout(() => runCountdown().then(renderResult), 150);
    }
    function hardStop(){ running = false; toggleBtns(false); clearTimeout(timer); showLayer(false); }
    async function runCountdown(){
      showCountdown(true);
      for (let n of [3,2,1]){
        digitEl.textContent = String(n);
        digitEl.style.animation='none';
        void digitEl.offsetWidth; 
        digitEl.style.animation='pop .8s ease forwards';
        await wait(850);
      }
      showCountdown(false);
    }
    function renderResult(){
      showLayer(false);
      const blob = new Blob([content], {type:'text/html'});
      const url = URL.createObjectURL(blob);
      outFrame.src = url;
      metaTag.textContent = `${(new Date()).toLocaleString()} â€¢ ${bytes(content.length)} karakter`; 
      showResult(true);
    }
    function wait(ms){return new Promise(r=>setTimeout(r,ms))}
    function bytes(n){ return new Intl.NumberFormat('id-ID').format(n); }
  </script>
</body>
</html>